# ===================================================================
# ๐ฆ POM-CONFIG PRE-COMMIT CONFIGURATION
# ===================================================================
# Shared configuration repository pre-commit hooks
# Focus: YAML validation, schema consistency
# ===================================================================

repos:
  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  # TIER 1: BLOCKING - Critical Safety Checks
  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-merge-conflict
        name: "๐ Check Merge Conflicts [BLOCKING]"
      - id: detect-private-key
        name: "๐ Detect Private Keys [BLOCKING]"

  - repo: local
    hooks:
      - id: block-root-markdown
        name: "๐ Block Root Markdown Edits [BLOCKING]"
        entry: python scripts/hooks/block_root_markdown.py
        language: python
        files: '^[^/]+\\.md$'
      - id: check-python-command-shim
        name: "๐ Enforce python/python3 in Dockerfiles [BLOCKING]"
        entry: python scripts/hooks/check_python_command_shim.py
        language: python
        files: '(^|/)(Dockerfile|Dockerfile\..*)$'

  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  # TIER 2: YAML/CONFIG VALIDATION
  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: end-of-file-fixer
        name: "๐ Fix EOF [AUTO-FIX]"
      - id: trailing-whitespace
        name: "๐งน Trim Trailing Whitespace [AUTO-FIX]"
        args: [--markdown-linebreak-ext=md]
      - id: check-yaml
        name: "โ YAML Validation [BLOCKING]"
        args: [--allow-multiple-documents]
      - id: check-json
        name: "โ JSON Validation"
      - id: check-case-conflict
        name: "๐ Check Case Conflicts"

  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  # TIER 3: PYTHON SCRIPTS
  # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.15
    hooks:
      - id: ruff
        name: "๐ Ruff Linting [AUTO-FIX]"
        args: [--fix, --exit-non-zero-on-fix]
        types_or: [python, pyi]
      - id: ruff-format
        name: "๐จ Ruff Formatting [AUTO-FIX]"
        types_or: [python, pyi]

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# GLOBAL CONFIGURATION
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

default_stages: [pre-commit]
minimum_pre_commit_version: 3.0.0
fail_fast: false

exclude: |
  (?x)^(
    \.git/.*|
    __pycache__/.*
  )$

ci:
  autofix_commit_msg: "style: automated pre-commit fixes"
  autofix_prs: true
  autoupdate_schedule: weekly

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# USAGE
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#
# Installation:
#   pip install pre-commit
#   pre-commit install
#
# ===================================================================
