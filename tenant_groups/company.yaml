# Company Research Tenant Group (LEGACY)
# ══════════════════════════════════════════════════════════════════════════════
# LEGACY TENANT GROUP - Used ONLY by Prismatic tenant for backward compatibility
# ══════════════════════════════════════════════════════════════════════════════
#
# This tenant group uses the LEGACY schema pattern:
# - Source: Company_source (not Domain)
# - Output: Company_research_* (not Research_*)
#
# ALL OTHER TENANT GROUPS should use the Entity Model:
# - Source: Domain
# - Output: Research_*
#
# See: corporate.yaml, travel.yaml, gaming.yaml, recipe.yaml for Entity Model

id: company
type: tenant_group
display_name: "Company Research (Legacy)"
description: |
  LEGACY: B2B company research using Company_source schema.
  Only for Prismatic tenant - all new tenants should use Entity Model.
  Analyzes companies across 10 dimensions using specialized researchers.

# Domain context applied to all researchers in this group
domain_context: |
  B2B technology company research and competitive intelligence.
  Focus on SaaS, enterprise software, and technology services.

  Key analysis dimensions:
  - Market positioning and competitive landscape
  - Financial health and funding trajectory
  - Product capabilities and technical architecture
  - Customer base and go-to-market strategy
  - Leadership team and organizational culture

industry_focus:
  preferred:
    - SaaS
    - Enterprise Software
    - B2B Technology
    - Cloud Infrastructure
    - Developer Tools
    - Integration Platforms
  avoid:
    - Consumer Apps
    - Retail
    - Gaming (unless B2B)

# Independent agents selected for this domain
researchers:
  - industry      # Market positioning, NAICS codes, business models
  - financial     # Revenue, funding, financial health
  - product       # Product capabilities, technical stack
  - customer      # Target customers, use cases, testimonials
  - leadership    # Exec team, founders, org structure
  - risk          # Business risks, compliance, vulnerabilities
  - partner       # Partnerships, integrations, ecosystem
  - social        # Social presence, community, brand
  - journalist    # Press coverage, analyst reports
  - competitor    # Competitive analysis, differentiation
  - domain        # Entity identity backfill (runs last, update_mode)

# ══════════════════════════════════════════════════════════════════════════════
# URL PATTERN ANALYSIS - Researcher-Weighted Relevance Scoring
# ══════════════════════════════════════════════════════════════════════════════
# Each URL pattern has:
# - pattern: Regex to match against URL path
# - default_weight: Base relevance (0.0-1.0) if no researcher-specific weight
# - researcher_weights: Per-researcher overrides (higher = more relevant for that researcher)
#
# Final score = weighted average across active researchers for this tenant group

url_patterns:
  # ─────────────────────────────────────────────────────────────────────────────
  # HIGH VALUE (0.7-1.0) - Core business intelligence pages
  # ─────────────────────────────────────────────────────────────────────────────
  high_value:
    # Product & Platform
    - pattern: "/(product|platform|solution|feature|capability)s?(/|$)"
      default_weight: 0.85
      researcher_weights:
        product: 1.0
        customer: 0.7
        competitor: 0.8
        partner: 0.6
        
    # Pricing & Plans
    - pattern: "/(pricing|plan|package|subscription|tier|quote)s?(/|$)"
      default_weight: 0.9
      researcher_weights:
        product: 0.9
        financial: 1.0
        customer: 0.85
        competitor: 0.9
        
    # Integrations & API
    - pattern: "/(integration|api|developer|doc|sdk|connector)s?(/|$)"
      default_weight: 0.85
      researcher_weights:
        product: 1.0
        partner: 0.95
        customer: 0.6
        competitor: 0.7
        
    # Customer Evidence
    - pattern: "/(customer|case.?study|success.?stor|testimonial|review)s?(/|$)"
      default_weight: 0.9
      researcher_weights:
        customer: 1.0
        industry: 0.85
        product: 0.7
        competitor: 0.6
        
    # Company Information
    - pattern: "/(about|company|who.?we.?are|our.?story|mission|value)s?(/|$)"
      default_weight: 0.8
      researcher_weights:
        industry: 0.85
        leadership: 0.9
        risk: 0.6
        social: 0.7
        
    # Leadership & Team
    - pattern: "/(team|leadership|executive|founder|management|board|advisor)s?(/|$)"
      default_weight: 0.85
      researcher_weights:
        leadership: 1.0
        risk: 0.7
        industry: 0.5
        
    # Investors & Funding
    - pattern: "/(investor|funding|raise|series|venture|capital)s?(/|$)"
      default_weight: 0.85
      researcher_weights:
        financial: 1.0
        leadership: 0.6
        risk: 0.7
        
    # Partners & Ecosystem
    - pattern: "/(partner|ecosystem|marketplace|alliance|certified)s?(/|$)"
      default_weight: 0.8
      researcher_weights:
        partner: 1.0
        product: 0.7
        industry: 0.6
        
    # Security & Compliance
    - pattern: "/(security|compliance|trust|soc2|gdpr|hipaa|iso)(/|$)"
      default_weight: 0.75
      researcher_weights:
        risk: 1.0
        product: 0.7
        customer: 0.6
        
    # Industry/Vertical Solutions
    - pattern: "/(industr|vertical|sector|enterprise|smb|startup)ies?(/|$)"
      default_weight: 0.8
      researcher_weights:
        industry: 1.0
        customer: 0.85
        product: 0.6

  # ─────────────────────────────────────────────────────────────────────────────
  # MEDIUM VALUE (0.4-0.7) - Supporting content with research value
  # ─────────────────────────────────────────────────────────────────────────────
  medium_value:
    # Blog & Content
    - pattern: "/(blog|news|article|post|insight|thought)s?(/|$)"
      default_weight: 0.5
      researcher_weights:
        journalist: 0.9
        industry: 0.65
        product: 0.5
        social: 0.7
        
    # Press & Media
    - pattern: "/(press|media|newsroom|coverage|mention)s?(/|$)"
      default_weight: 0.6
      researcher_weights:
        journalist: 1.0
        industry: 0.7
        financial: 0.6
        social: 0.8
        
    # Resources & Downloads
    - pattern: "/(resource|whitepaper|ebook|guide|download|webinar)s?(/|$)"
      default_weight: 0.55
      researcher_weights:
        industry: 0.8
        product: 0.6
        customer: 0.65
        
    # Events & Conferences
    - pattern: "/(event|conference|summit|meetup|webcast)s?(/|$)"
      default_weight: 0.45
      researcher_weights:
        industry: 0.7
        partner: 0.6
        social: 0.75
        journalist: 0.6
        
    # Community & Forums
    - pattern: "/(community|forum|discuss|slack|discord)s?(/|$)"
      default_weight: 0.5
      researcher_weights:
        social: 0.9
        customer: 0.65
        product: 0.5
        
    # Changelog & Updates
    - pattern: "/(changelog|release|update|what.?s.?new|version)s?(/|$)"
      default_weight: 0.55
      researcher_weights:
        product: 0.85
        journalist: 0.6
        competitor: 0.7
        
    # Demo & Trial
    - pattern: "/(demo|trial|sandbox|playground|free.?tier)s?(/|$)"
      default_weight: 0.5
      researcher_weights:
        product: 0.75
        customer: 0.6
        competitor: 0.65

  # ─────────────────────────────────────────────────────────────────────────────
  # LOW VALUE (0.0-0.4) - Administrative or non-research pages
  # ─────────────────────────────────────────────────────────────────────────────
  low_value:
    # Legal & Compliance Docs
    - pattern: "/(legal|privacy|terms|cookie|gdpr.?notice|dmca|disclaimer)s?(/|$)"
      default_weight: 0.15
      researcher_weights:
        risk: 0.5  # Some value for compliance review
        
    # Careers & Jobs
    - pattern: "/(career|job|hiring|opening|apply|recruit|talent)s?(/|$)"
      default_weight: 0.2
      researcher_weights:
        leadership: 0.4  # Team growth signals
        risk: 0.3        # Hiring velocity indicator
        industry: 0.25   # Market expansion hints
        
    # Authentication Pages
    - pattern: "/(login|signin|signup|register|auth|sso|oauth)(/|$)"
      default_weight: 0.05
      researcher_weights: {}  # Low for all
      
    # Support & Help
    - pattern: "/(support|help|contact|ticket|chat|call)(/|$)"
      default_weight: 0.25
      researcher_weights:
        customer: 0.4   # Support model info
        product: 0.35   # Product support structure
        risk: 0.3       # Support quality
        
    # Technical Infrastructure
    - pattern: "/(status|uptime|incident|maintenance|system)(/|$)"
      default_weight: 0.2
      researcher_weights:
        risk: 0.6       # Reliability info
        product: 0.4    # Infrastructure quality
        
    # Utility Pages
    - pattern: "/(sitemap|robots|feed|rss|atom|manifest)(\\.xml|\\.txt)?$"
      default_weight: 0.0
      researcher_weights: {}  # Skip these completely
      
    # Asset Paths
    - pattern: "/(asset|static|cdn|image|img|css|js|font)s?/"
      default_weight: 0.0
      researcher_weights: {}  # Skip static assets
      
    # Pagination & Filters
    - pattern: "/page/\\d+|\\?page=|\\?sort=|\\?filter="
      default_weight: 0.3
      researcher_weights: {}  # Reduce duplicate content
      
    # Archive Pages
    - pattern: "/(archive|category|tag|author)/\\d{4}/"
      default_weight: 0.25
      researcher_weights:
        journalist: 0.5  # Historical content
        
    # Search Results
    - pattern: "/(search|find|query|result)s?\\?"
      default_weight: 0.1
      researcher_weights: {}  # Dynamic content

# ══════════════════════════════════════════════════════════════════════════════
# CONTENT TYPE DETECTION - URL-Based (No HTTP Request)
# ══════════════════════════════════════════════════════════════════════════════
# Identifies content type from URL patterns for future capabilities:
# - Document extraction (PDF, Office docs)
# - Multimedia cataloging (video, audio, images)
# - Structured data extraction (JSON, XML, CSV)
#
# current_action:
#   - scrape: Normal text extraction (default for HTML)
#   - catalog: Save URL + metadata only (for future processing)
#   - skip: Ignore completely

# ════════════════════════════════════════════════════════════════════════════════
# URL ANTIPATTERNS - Pages to EXCLUDE from context (low business value)
# ════════════════════════════════════════════════════════════════════════════════
# These pages dominate content volume but rarely contain core business information.
# Excluding them ensures researchers focus on high-value pages like /about, /pricing.
url_antipatterns:
  # Blog content - valuable for some researchers, noise for others
  - pattern: "/blog(/|$)"
    default_score: 0.3
    researcher_scores:
      financial: 0.7    # Funding announcements often in blog
      journalist: 0.8   # Press releases, coverage
      product: 0.5      # Feature launches
      customer: 0.5     # Case studies sometimes in blog
      industry: 0.15    # Rarely has business model info
      leadership: 0.2   # Team info on /about, not blogs
      partner: 0.3      # Occasional integration announcements
      competitor: 0.2   # Comparison posts rare
      social: 0.4       # Community updates
      risk: 0.3         # Security announcements
    reason: "Blog relevance varies by researcher type"
    
  # News and press - highly valuable for journalist/financial
  - pattern: "/(news|press|media|announcement)s?(/|$)"
    default_score: 0.4
    researcher_scores:
      journalist: 0.9   # Primary source for press coverage
      financial: 0.8    # Funding/acquisition news
      industry: 0.3     # Events, not fundamentals
      leadership: 0.5   # Executive announcements
    reason: "News pages valuable for journalist/financial researchers"
    
  # Product updates - valuable for product researcher
  - pattern: "/(product.?update|changelog|release.?note|what.?new)s?(/|$)"
    default_score: 0.3
    researcher_scores:
      product: 0.8      # Feature roadmap, capabilities
      competitor: 0.4   # Feature comparison data
      industry: 0.2     # Not business model
    reason: "Product updates valuable for product researcher"
    
  # Resource libraries - educational content
  - pattern: "/(resource|template|guide|ebook|whitepaper|webinar)s?(/|$)"
    default_score: 0.25
    researcher_scores:
      product: 0.5      # Shows product capabilities
      customer: 0.4     # Shows use cases
    reason: "Educational content, moderately useful"
    
  # Help and support - product usage, not business info
  - pattern: "/(help|support|faq|knowledge.?base)(/|$)"
    default_score: 0.2
    researcher_scores:
      product: 0.4      # Feature documentation
      risk: 0.5         # Security/compliance docs often here
    reason: "Support docs useful for product/risk only"

content_types:
  # Documents (PDF, Office formats)
  documents:
    patterns:
      - "\\.pdf$"
      - "\\.docx?$"
      - "\\.xlsx?$"
      - "\\.pptx?$"
      - "\\.odt$"
      - "/download/.*\\.(pdf|doc|xls|ppt)"
    future_capability: document_extraction
    current_action: catalog
    researcher_boost:  # These docs are valuable for specific researchers
      industry: 0.8    # Whitepapers, reports
      financial: 0.9   # Financial statements
      product: 0.7     # Technical specs
    
  # Video Content
  video:
    patterns:
      - "\\.mp4$|\\.mov$|\\.avi$|\\.webm$|\\.mkv$"
      - "/video/|/watch/|/stream/"
      - "/embed/.*video"
      - "youtube\\.com/watch|vimeo\\.com/\\d+|wistia\\.com"
      - "loom\\.com/share|vidyard\\.com"
    future_capability: video_transcript_extraction
    current_action: catalog
    researcher_boost:
      product: 0.7     # Demo videos
      customer: 0.8    # Testimonial videos
      journalist: 0.6  # Press videos
    
  # Audio Content
  audio:
    patterns:
      - "\\.mp3$|\\.wav$|\\.ogg$|\\.m4a$"
      - "/podcast|/audio|/listen|/episode"
      - "spotify\\.com|anchor\\.fm|transistor\\.fm"
    future_capability: audio_transcript_extraction
    current_action: catalog
    researcher_boost:
      journalist: 0.8  # Podcast interviews
      leadership: 0.7  # Founder podcasts
    
  # Images & Graphics
  images:
    patterns:
      - "\\.png$|\\.jpg$|\\.jpeg$|\\.gif$|\\.svg$|\\.webp$"
      - "/gallery|/photos|/images"
      - "/infographic"
    future_capability: image_analysis
    current_action: skip  # Not useful for text research currently
    
  # Structured Data
  structured_data:
    patterns:
      - "\\.json$"
      - "\\.xml$"
      - "\\.csv$"
      - "\\.yaml$|\\.yml$"
      - "/api/v\\d+/"
      - "/graphql"
    future_capability: structured_extraction
    current_action: skip  # API endpoints, not content
    
  # Interactive Apps (require auth/JS)
  interactive:
    patterns:
      - "/app/|/dashboard/|/portal/"
      - "/account/|/settings/"
      - "/checkout|/cart|/payment"
      - "/admin/"
    future_capability: none
    current_action: skip  # Requires authentication
    
  # Text/HTML (Default)
  text_html:
    patterns: []  # Default for everything else
    future_capability: text_extraction
    current_action: scrape

# ══════════════════════════════════════════════════════════════════════════════
# DISPLAY NAMES - Used in report titles and UI
# ══════════════════════════════════════════════════════════════════════════════
display_names:
  entity: Company
  entity_plural: Companies
  customer: Customer
  customer_plural: Customers

# ══════════════════════════════════════════════════════════════════════════════
# LEGACY ENTITY CONFIGURATION
# ══════════════════════════════════════════════════════════════════════════════
# This is the ONLY tenant group that uses Company_source and Company_research_*
# All other tenant groups use Domain + Research_*
entity:
  entity_type: Company
  # LEGACY: Source is Company_source (not Domain)
  source_collection: Company_source
  # LEGACY: Research collections use Company_ prefix
  research_schema_prefix: "Company_"
  domain_schema: Domain
  # Page research configuration
  page_research:
    page_intelligence_schema: Page_intelligence
    page_facts_schema: Page_facts

# Schema pattern (generates Company_research_{researcher})
schema_pattern: "Company_research_{researcher}"

# Entity spawn sources - which research collections can spawn new research subjects
entity_spawn_sources:
  - researcher: competitor
    collection: Company_research_competitor
    enabled: true
    auto_spawn: false  # If true, spawn runs automatically after research
