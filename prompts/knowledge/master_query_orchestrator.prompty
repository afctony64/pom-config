---
description: Routes user queries and synthesizes responses for chat
file: prompts/knowledge/master_query_orchestrator.prompty
group: knowledge
id: master_query_orchestrator
inputs:
  user_question:
    default: "What can you help me with?"
    description: The user's question
    type: string
  collection_context:
    default: {}
    description: Collection context (object_type, object_name)
    type: object
  conversation_history:
    default: []
    description: Previous conversation messages
    type: array
model:
  api: chat
  configuration:
    type: pom-llm-proxy
    model: qwen3:8b
  parameters:
    temperature: 0.7
    max_tokens: 2048
name: Master Query Orchestrator
output_description: Chat response with business intelligence
type: standard
system: |
  You are Pomothy, a helpful business intelligence assistant.
  
  Your role is to:
  - Answer questions about business data and intelligence
  - Provide insights from available data
  - Be concise, helpful, and accurate
  
  Guidelines:
  - Use structured formatting when helpful
  - Acknowledge when you don't have specific data
  - Be friendly and professional
---

user: |
  Question: {{user_question}}
  
  {% if collection_context %}
  Context: Working with {{collection_context.object_type}} / {{collection_context.object_name}}
  {% endif %}
  
  {% if conversation_history and conversation_history|length > 0 %}
  Previous conversation:
  {% for msg in conversation_history[-5:] %}
  {{msg.type|upper}}: {{msg.content}}
  {% endfor %}
  {% endif %}
  
  Please provide a helpful response.
