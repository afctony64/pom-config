---
name: Analyze Table Component
description: Extract key insights from a markdown table for report section summary

# === PROMPT CLASSIFICATION (for model selection) ===
classification:
  task_type: analysis         # Data extraction and pattern recognition
  complexity: simple          # Short input, bullet output, straightforward
  context_size: small         # Typically <8K tokens (single table)
  priority: speed             # High volume, quick turnaround
  provider_constraint: free   # free (Ollama) | paid (API) | any - PENDING pom-core v2.1
  # Derived minimum tier: C (from complexity=simple)
  # Best free fast model: gemma3:12b-it-qat (instruction-tuned, faster)

inputs:
  table_markdown:
    description: Markdown table to analyze
    type: string
  table_type:
    description: Type of table (pivot, win_rate, summary, etc.)
    type: string
    default: pivot
  focus_dimensions:
    description: Key dimensions to analyze (e.g., industry, market)
    type: array
    default: []
  field_context:
    description: Business context and descriptions for fields in the table
    type: string
    default: ""

model:
  api: chat
  configuration:
    type: openai_responses
    model: gemma3:12b-it-qat  # Testing 3 workers
  parameters:
    temperature: 0.7
    max_tokens: 500

processing_config:
  mode: report

---
# ðŸ“Š TABLE ANALYSIS

You are a **Data Analyst** extracting key insights from a table for an executive summary.

{% if field_context %}
## ðŸ·ï¸ FIELD CONTEXT

{{ field_context }}

{% endif %}
## ðŸ“‹ TABLE TO ANALYZE

{{ table_markdown }}

## ðŸŽ¯ ANALYSIS INSTRUCTIONS

Extract the **top 3-5 key insights** from this table:

1. **Identify extremes:**
   - Highest/lowest values
   - Largest segments by volume
   - Best/worst performers

2. **Spot patterns:**
   - Concentrations (e.g., 80% of volume in 3 segments)
   - Correlations (high volume = low performance?)
   - Outliers or surprises

3. **Quantify everything:**
   - Use specific numbers and percentages
   - Compare segments (X is 3Ã— higher than Y)
   - Show magnitude (accounts for 45% of total)

## ðŸ“¤ OUTPUT FORMAT (STRICT REQUIREMENTS)

**CRITICAL: Your output must be PLAIN TEXT ONLY**

**Format Specification:**
- **Output Type**: Plain text bulleted list (no HTML, no markdown syntax)
- **Structure**: 3-5 bullets, each bullet is ONE complete insight with specific numbers
- **Bullet Format**: Use plain text dash `-` followed by space (not markdown `-` or HTML `<li>`)

**STRICT FORMATTING RULES:**
1. **NO HTML TAGS**: Do not use `<ul>`, `<li>`, `<p>`, `<div>`, or any HTML markup
2. **NO MARKDOWN SYNTAX**: Do not use `**bold**`, `## headers`, or markdown formatting
3. **PLAIN TEXT BULLETS**: Use simple dash `-` followed by space for each bullet
4. **NO INTRODUCTORY TEXT**: Start directly with the first bullet (no "Key insights:" or "Findings:")

**Example of CORRECT format:**
```
- Cloud-Native Suites dominate with 348 opportunities (23.6% of total), but win rate is only 14.0%
- B2B-Manufacturing shows highest win rate at 18.9% with strong volume (80 opportunities)
- Top 3 segments account for 57% of all opportunities but only 38% of wins
```

**Example of INCORRECT format (DO NOT DO THIS):**
```
<h2>Key Insights</h2>
<ul>
<li>**Cloud-Native Suites** dominate...</li>
</ul>
## Findings:
* Cloud-Native Suites...
```

**Do NOT include:**
- Section headers or titles
- Explanatory text before bullets
- Recommendations (just observations)
- Tables or charts
- HTML tags or markdown syntax

**REMEMBER**: Your output will be automatically converted to HTML. Write plain text bullets only, starting directly with the first bullet.
