id: competitor
type: researcher_ai
researcher_type: competitor
# Researcher AI Configuration: Competitive Intelligence
# Links to pom-core collection schema for data structure

collection_schema_id: Research_competitor
name: Research Competitor

researcher_identity:
  title: Senior Competitive Intelligence Analyst
  mission: Provide structured competitive analysis with concise, actionable insights
  ecosystem_role: Competitor-focused researcher delivering JSON-formatted intelligence
  core_competencies:
  - 'Direct Competitor Identification: Finding ALL companies customers compare
    THIS company to (typically 5-12 from comparison pages)'
  - 'Structured VS Analysis: Price comparison, advantage mapping, gap identification
    per competitor'
  - 'Market Positioning: Leader/Challenger/Niche positioning relative to each competitor'
  - 'Head-to-Head Benchmarking: Feature-by-feature, price-by-price, market-by-market
    comparison'
  - 'Awards & Accolades Analysis: Professional rankings, certifications as competitive
    differentiators'

# Semantic search queries for page selection (page_facts_vector injector)
# Issue #384: Multiple queries for comprehensive Page_facts coverage
# NOTE: Queries phrased as ANSWER DESCRIPTIONS, not questions
# Questions match question-like patterns in legal/boilerplate content
# Answer descriptions match actual competitor content
search_queries:
  - "competitor alternative vs comparison better than unlike"
  - "G2 Capterra ranking review leader challenger market position"
  - "pricing feature advantage differentiator unique selling"
  - "pricing plans cost subscription tier"
  - "feature comparison matrix integrations capabilities"
  - "reviews ratings alternatives competitors comparison"
  - "market leader challenger niche ranking quadrant wave"

# BM25 keyword queries - used by page_facts_vector injector (supplements vector)
keyword_queries:
  - "pricing"
  - "pricing plans"
  - "cost"
  - "subscription"
  - "tiers"
  - "features"
  - "integrations"
  - "use cases"
  - "case studies"
  - "alternatives"
  - "competitors"
  - "comparison"
  - "how-we-compare"
  - "vs"
  - "compare"
  - "reviews"
  - "ratings"
  - "g2"
  - "capterra"
  - "gartner"
  - "forrester"
  - "magic quadrant"
  - "wave"
  - "peer reviews"
  - "market leader"
  - "challenger"
  - "niche"

# URL boost patterns - used by page_facts_vector injector
url_boost_patterns:
  - "/pricing"
  - "/pricing-plans"
  - "/plans"
  - "/features"
  - "/integrations"
  - "/compare"
  - "/comparison"
  - "/how-we-compare"
  - "/vs"
  - "/alternatives"
  - "/competitors"
  - "/reviews"
  - "/ratings"
  - "/case-studies"
  - "/use-cases"
  - "/solutions"
  - "/products"
  - "/customers"

# Focus areas for this researcher (prompt guidance, not used by injector)
focus_areas:
  - Direct competitors (all companies customers actually compare to)
  - "CRITICAL: Extract EVERY competitor from /how-we-compare or comparison pages - do NOT skip any"
  - "Include ALL companies with dedicated comparison pages (Paragon, Boomi, Cyclr, Pandium, Appmixer, N8n, Tray, Workato, Zapier, etc.)"
  - "Aim for 8-15 competitors - include smaller/niche players, not just market leaders"
  - Competitive advantages vs each competitor (what THIS company does better)
  - Competitive gaps vs each competitor (where competitors are stronger)
  - Market positioning (leader, challenger, niche player)
  - Awards and accolades (G2, Capterra rankings, certifications)

# Fact types to extract from source content
# Used by ContextExecutor for fact-type prioritization when preparing context.
fact_types:
  - competitor_name
  - competitive_advantage
  - competitive_gap
  - market_position
  - pricing_comparison
  - feature_comparison
  - award_or_ranking

# Anti-patterns to avoid (guides LLM away from common mistakes)
avoid:
  - Comparing to unrelated companies in completely different markets
  - Speculating on competitor strategy without evidence from sources
  - Including companies that serve different customer segments entirely
  - Using the company's own biased comparison pages as sole source
  - Confusing indirect competitors with direct competitors
  - Confusing technology partners with competitors

# Tools available for this researcher (AITools that can be called by the AI)
tools:
  - brave_search  # Web search for competitor analysis, G2/Capterra reviews

tool_guidance:
  brave_search:
    priority: high
    max_calls: 2  # LIMIT: Only 2 searches for competitors
    tool_choice: required  # Competitor data from G2/Capterra is essential (company pages are biased)
    usage_instructions: |
      âš ï¸ QUERY FORMAT RULES (prevent API errors):
      - Keep queries under 80 characters total
      - Use 3-6 focused keywords maximum
      - NEVER repeat the company name or keywords in the same query
      - ONE search intent per query â€” do NOT concatenate multiple searches
      - BAD: "Acme G2 capterra alternatives competitors reviews Acme.com competitors Acme SaaS G2 Capterra alternatives"
      - GOOD: "Acme G2 capterra alternatives competitors"
    when_to_use: |
      ðŸ” SMART SEARCH STRATEGY (MAX 2 SEARCHES):

      âš ï¸ Company comparison pages are BIASED - search third-party!

      **SEARCH #1 (REQUIRED): Review platforms**
      â†’ "{company} G2 capterra alternatives competitors"
      (G2/Capterra have the best competitor data)

      **SEARCH #2 (IF NEEDED): Market position**
      â†’ "{company} vs competitors market comparison"
      (Only if G2 search didn't identify competitors)

      **STOP after finding:**
      - All key competitors mentioned in sources
      - Positioning (leader/challenger/niche)
      - Key differentiators

    recommended_searches:
      # Combined review platform search:
      primary: "{company_name} G2 capterra alternatives competitors reviews"

      # Only if primary didn't find competitors:
      comparison: "{company_name} vs competitors comparison market"

# page_categories_of_interest: REMOVED - not implemented in pom-core (dead code)

citation_note: "No inline URLs in field values; put sources in CIT/evidence fields."

# Entity spawn configuration
# Spawn fields are auto-detected from schema via sets: [spawn] (pom-core#295)
# - Source field: text[] with spawn set and no parallel_to
# - Domain field: text[] with spawn set and parallel_to, name contains "domain"
# - Context fields: Other fields with spawn set and parallel_to
entity_spawn:
  enabled: true  # Schema defines fields via sets: [spawn]

# Parallel array enrichment configuration
# Uses generic parallel_array_enricher.prompty to fill post fields via web search
parallel_array_enrichment:
  enabled: true
  anchor_field: keyCompetitors
  context_fields:
    - domain                    # Source entity domain for disambiguation
  # enrich_fields: Auto-detected from schema via sets: [post]
  search_query_template: >
    {subject} official website

# Dependency-resolved tool chain. spawn auto-adds enricher as dependency.
# Phase 1: enricher + enum_cat (parallel), Phase 2: spawn (after enricher).
chain:
  - entity_spawn   # Depends on enricher (auto-resolved) for enriched domains
  - enum_cat       # Classifies all Cat fields (cat_classifier + vec_classifier)
