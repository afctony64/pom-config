id: partner
type: researcher_ai
researcher_type: partner
# Researcher AI Configuration: Partnership Ecosystem Intelligence
# Links to pom-core collection schema for data structure

collection_schema_id: Research_partner
name: Research Partner

researcher_identity:
  title: Partnership Ecosystem Analyst
  mission: Map and analyze partnership networks, strategic alliances, and ecosystem relationships
  ecosystem_role: Partnership-focused researcher delivering structured ecosystem intelligence
  core_competencies:
  - 'Partnership Mapping: Strategic alliances, technology partners, reseller networks'
  - 'Ecosystem Analysis: Partner types, integration patterns, collaboration models'
  - 'Relationship Assessment: Partnership strength, strategic fit, mutual benefits'
  - 'Network Intelligence: Partner ecosystems, alliance strategies, channel partnerships'

# Semantic search queries for page selection (page_facts_vector injector)
# NOTE: Queries phrased as ANSWER DESCRIPTIONS, not questions
# Questions match question-like patterns (privacy policy "How we use...")
# Answer descriptions match actual partnership content
search_queries:
  - "partner integration technology ecosystem Salesforce HubSpot Zapier"
  - "partnership program alliance reseller channel marketplace"
  - "integrates with connects to works with API connector"

# BM25 keyword queries - used by page_facts_vector injector (supplements vector)
keyword_queries:
  - "partners"
  - "partnership"
  - "ecosystem"
  - "marketplace"
  - "reseller"
  - "channel"
  - "technology partner"

# URL boost patterns - used by page_facts_vector injector
url_boost_patterns:
  - "/partners"
  - "/partner"
  - "/integrations"
  - "/marketplace"
  - "/ecosystem"
  - "/alliances"

# Focus areas for this researcher (prompt guidance, not used by injector)
focus_areas:
  - Technology partners and integrations
  - Strategic alliances and partnerships
  - Partner program structure and tiers
  - Reseller and channel partners
  - Integration marketplace and ecosystem

# Fact types to extract from source content
# Used by ContextExecutor for fact-type prioritization when preparing context.
fact_types:
  - partner_name
  - partner_type
  - integration
  - partnership_announcement
  - partner_program
  - strategic_alliance

# Anti-patterns to avoid (guides LLM away from common mistakes)
avoid:
  - Confusing customers with technology partners
  - Listing unverified or expired partnerships as current
  - Including competitors as partners without evidence
  - Assuming integrations automatically mean partnerships
  - Listing vendors/suppliers as strategic partners
  - Including one-time collaborations as ongoing partnerships

# Tools available for this researcher (AITools that can be called by the AI)
tools:
  - brave_search  # Web search for partnership announcements

tool_guidance:
  brave_search:
    priority: medium
    max_calls: 1  # LIMIT: Only 1 search - partners usually on website
    when_to_use: |
      ðŸ” SEARCH ONLY IF page content lacks partner details

      **SEARCH (IF NEEDED): Partnership announcements**
      â†’ "{company} partnership integration announcement"

      **STOP after finding:**
      - Key technology partners
      - Integration partnerships
      - Strategic alliances

    recommended_searches:
      primary: "{company_name} partnership integration announcement strategic"

citation_note: "No inline URLs in field values; put sources in CIT/evidence fields."

# Entity spawn configuration
# Spawn fields are auto-detected from schema via sets: [spawn] (pom-core#295)
# - Source field: text[] with spawn set and no parallel_to (keyPartners)
# - Domain field: text[] with spawn set and parallel_to, name contains "domain" (partnerDomain)
entity_spawn:
  enabled: true  # Schema defines fields via sets: [spawn]

# Parallel array enrichment configuration
# Uses generic parallel_array_enricher.prompty to fill post fields via web search
parallel_array_enrichment:
  enabled: true
  anchor_field: keyPartners
  context_fields:
    - domain                    # Source entity domain for disambiguation
  # enrich_fields: Auto-detected from schema via sets: [post]
  search_query_template: >
    {subject} official website

# Prompt chain: prompt types executed in list order after the main researcher prompt.
# Each link receives execution artifacts from the main prompt and prior links.
# This is a chain definition â€” the list order defines implicit dependencies.
post_execution_tools:
  - parallel_array_enricher  # Enrich array_enricher fields (keyPartnerEvidence, partnerDomain)
  - entity_spawn             # Create Domain records for partners
  - enum_cat                 # Classify cat_classifier fields (partnerTypeCat, etc.)
  # References are now generated automatically by schema_coercer on upsert
