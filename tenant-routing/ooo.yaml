# =============================================================================
# OOO (OUT OF OFFICE) MODE TENANT ROUTING
# =============================================================================
# Mode: Mac + Cloud (Spark offline)
# Use case: Background processing while away, Spark unavailable
# =============================================================================

mode: ooo
version: "1.2"
description: "OOO mode - Mac compute + Cloud Weaviate (Spark offline)"

defaults:
  weaviate_target: cloud
  cloud_enabled: true
  spark_enabled: false  # Spark is offline

weaviate_instances:
  cloud:
    url: "${WEAVIATE_CLOUD_URL}"
    api_key_env: WEAVIATE_CLOUD_KEY
    description: "Cloud Weaviate - Production data (70k+ prismatic objects)"

  mac:
    url: "http://mac-weaviate:8080"
    description: "Mac Weaviate - Local development/testing"

  # Spark offline - not available
  # spark:
  #   url: "http://spark-65d6.local:8080"
  #   description: "Spark Weaviate - OFFLINE"

tenants:
  prismatic:
    weaviate_target: cloud
    description: "Production tenant - Cloud for research, Mac for pages"
    collections:
      # Research collections on Cloud (40k+ total)
      Research_*: cloud
      Opportunity: cloud      # 1,553 objects
      Domain: cloud           # 29,226 objects (source of truth)
      # Page processing on Mac (937k+ objects - main data store)
      Page_facts: mac         # 937,444 objects
      Page_content: mac       # 84,414 objects
      Page_researcher: mac    # 0 objects
      Page_intelligence: cloud

  test_db:
    weaviate_target: mac
    description: "Test tenant - always routes to local mac-weaviate"

  demo:
    weaviate_target: mac
    description: "Demo tenant - local only"

compute:
  ollama: "Mac native (Metal GPU) - http://host.docker.internal:11435"
  transformers: "Mac native (Metal) - http://host.docker.internal:8093"
  redis: "Mac Docker - redis://mac-redis:6379"

notes:
  mode: "Mac + Cloud (Spark offline)"
  cloud: "Cloud Weaviate for prismatic production data"
  mac: "Mac for compute (Ollama, Transformers) and local collections"
  spark: "OFFLINE - switch to HOME mode when Spark is back"
