id: competitor_research
collection: Domain  # Keep Domain as root - works with current pom-core
name: Competitor Research
type: data_card
file: competitor_research.yaml
description: >
  Fetch Domain records with Research_competitor via relationship traversal.
  
  NOTE: Uses standard Domain-centered approach. Relationship traversal brings
  all researchers. Filtering to competitor-only happens at report builder level.
  
  BUG REFERENCE: Starting from Research_competitor fails due to pom-core schema
  mismatch (research_risk property not in Weaviate). Keep Domain as root until fixed.

# Tagging system
tags:
  - research
  - competitor
  - entity-intelligence
  - focused

target_scope: entity_intelligence
executor: fetch

# Frontend Display Control
display: true
relationship_support: true

personas:
  - "*"

parameters:
  type: fetch
  collection: Domain
  relationship_traversal: true
  dynamic_templates: true
  limit: 10000
  limit_default: 10000
  field_set: [standard, extended, array]

# No explicit fields - resolved by field_set
fields: {}

# Tags for field filtering
field_tags:
  - Cat
  - LLM
  - research

# Collections
collections:
  - collection: Domain
    required: true
    field_set: [standard, extended, array]

  - collection: Research_competitor
    field_set: [standard, extended, array]

# Chat integration
chat_integration:
  best_for:
    - "Competitor intelligence for single entity"
    - "Testing parallel array rendering"
    - "Competitive analysis"

  usage_patterns:
    - "Uses Domain as root (standard approach)"
    - "Relationship traversal brings all researchers"
    - "Filter to competitor at report level"

  parameter_examples:
    - name: "Single entity competitor intel"
      params: {where: {domain: "example.com"}}

# Response structure
response_structure:
  root_object: Domain
  includes_relationships: true
  relationship_style: reverse_traversal
  field_focus: competitor_research
  expected_collections:
    - Domain
    - Research_competitor

# Documentation
documentation:
  overview: |
    Competitor-focused data card using Domain-centered approach.
    
    KNOWN LIMITATION: Relationship traversal brings ALL researchers.
    Filter to competitor-only at report/asset level.
    
    FIELD SET BEHAVIOR:
    - standard: Core fields (Cat, key scalars, core parallel arrays)
    - extended: Deep-dive fields (LLM analysis, detailed arrays, scores)
    - array: All array fields (required for parallel array tables)
